<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_19s0o48" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.6.0">
  <bpmn:collaboration id="Collaboration_076bpic">
    <bpmn:documentation>Дата фабрика</bpmn:documentation>
    <bpmn:participant id="Participant_16k8tsd" name="Оновлення даних про лабораторію" processRef="update-lab" />
  </bpmn:collaboration>
  <bpmn:process id="update-lab" name="Оновлення даних про лабораторію" isExecutable="true">
    <bpmn:laneSet id="LaneSet_0insh9e" />
    <bpmn:userTask id="searchLabFormActivity" name="Пошук лабораторії" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-search-lab" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="" />
        </camunda:properties>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1kqecau</bpmn:incoming>
      <bpmn:outgoing>Flow_014dzg9</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:startEvent id="Event_0garqs8" name="Початок" camunda:initiator="initiator">
      <bpmn:outgoing>Flow_14ae7b2</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:exclusiveGateway id="Gateway_1xtqt2s">
      <bpmn:incoming>Flow_14ae7b2</bpmn:incoming>
      <bpmn:incoming>Flow_10urxou</bpmn:incoming>
      <bpmn:incoming>Flow_1j6i1u4</bpmn:incoming>
      <bpmn:incoming>Flow_0t6hry5</bpmn:incoming>
      <bpmn:incoming>Flow_1keuxww</bpmn:incoming>
      <bpmn:incoming>Flow_1g4noy6</bpmn:incoming>
      <bpmn:incoming>Flow_1yoy31g</bpmn:incoming>
      <bpmn:outgoing>Flow_1kqecau</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_041kh82" sourceRef="defineBusinessProcessStatusActivity" targetRef="Event_0xw0ca1" />
    <bpmn:sequenceFlow id="Flow_1t8c6oe" sourceRef="Event_1x8mg0g" targetRef="Gateway_0gqiwsr" />
    <bpmn:sequenceFlow id="Flow_0hz7hdv" sourceRef="extractNameAndEdrpouFromUpdateLabFormActivity" targetRef="Gateway_038bgls" />
    <bpmn:sequenceFlow id="Flow_1ut6pfw" name="ні" sourceRef="Gateway_1qa6te9" targetRef="Gateway_0gqiwsr">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${response.value.responseBody.elements().isEmpty()}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1gk3fzt" sourceRef="Gateway_0poyko1" targetRef="updateLabFormActivity" />
    <bpmn:sequenceFlow id="Flow_08wtjup" name="так" sourceRef="Gateway_1qa6te9" targetRef="Activity_00w3djy">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!response.value.responseBody.elements().isEmpty()}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1oda6vs" sourceRef="Activity_00w3djy" targetRef="Gateway_0poyko1" />
    <bpmn:sequenceFlow id="Flow_0qe6tpr" name="ні" sourceRef="Gateway_038bgls" targetRef="Gateway_0gqiwsr">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${oldName.value.equals(name.value)}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_09rm3a8" sourceRef="Gateway_0gqiwsr" targetRef="signLabFormActivity" />
    <bpmn:sequenceFlow id="Flow_1kqecau" sourceRef="Gateway_1xtqt2s" targetRef="searchLabFormActivity" />
    <bpmn:sequenceFlow id="Flow_14ae7b2" sourceRef="Event_0garqs8" targetRef="Gateway_1xtqt2s" />
    <bpmn:sequenceFlow id="Flow_10urxou" sourceRef="Event_1ggoh7i" targetRef="Gateway_1xtqt2s" />
    <bpmn:sequenceFlow id="Flow_1w1iczd" sourceRef="readLabFromDataFactoryActivity" targetRef="readKoatuuFromDataFactoryActivity" />
    <bpmn:sequenceFlow id="Flow_0yx6dt7" sourceRef="readKoatuuFromDataFactoryActivity" targetRef="readOblInfoFromDataFactoryActivity" />
    <bpmn:sequenceFlow id="Flow_1jl0egn" sourceRef="searchOblastFromDataFactoryActivity" targetRef="readOwnershipFromDataFactoryActivity" />
    <bpmn:sequenceFlow id="Flow_1ib47w7" sourceRef="readOwnershipFromDataFactoryActivity" targetRef="readKopfgFromDataFactoryActivity" />
    <bpmn:sequenceFlow id="Flow_091xock" sourceRef="readKopfgFromDataFactoryActivity" targetRef="convertLabDataToFormDataFormatActivity" />
    <bpmn:sequenceFlow id="Flow_1j6i1u4" sourceRef="Event_15jex7p" targetRef="Gateway_1xtqt2s" />
    <bpmn:sequenceFlow id="Flow_0t6hry5" sourceRef="Event_15d2rb2" targetRef="Gateway_1xtqt2s" />
    <bpmn:sequenceFlow id="Flow_1keuxww" sourceRef="Event_15mrc5a" targetRef="Gateway_1xtqt2s" />
    <bpmn:sequenceFlow id="Flow_1g4noy6" sourceRef="Event_0f8ud3h" targetRef="Gateway_1xtqt2s" />
    <bpmn:sequenceFlow id="Flow_0s14o5i" sourceRef="searchForLabByNameAndEdrpouActivity" targetRef="Gateway_1qa6te9" />
    <bpmn:sequenceFlow id="Flow_0dadnzp" name="так" sourceRef="Gateway_038bgls" targetRef="searchForLabByNameAndEdrpouActivity">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!oldName.value.equals(name.value)}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0jbvai0" sourceRef="convertSignFormDataToDataFactoryFormatActivity" targetRef="signFormDataWithDsoActivity" />
    <bpmn:sequenceFlow id="Flow_00oa0q7" sourceRef="updateLabInDataFactoryActivity" targetRef="defineBusinessProcessStatusActivity" />
    <bpmn:sequenceFlow id="Flow_014dzg9" sourceRef="searchLabFormActivity" targetRef="readLabFromDataFactoryActivity" />
    <bpmn:dataStoreReference id="DataStoreReference_1avq00l" name="Дата фабрика" />
    <bpmn:scriptTask id="convertLabDataToFormDataFormatActivity" name="Підготовка даних для запису (transient var)" scriptFormat="groovy">
      <bpmn:incoming>Flow_091xock</bpmn:incoming>
      <bpmn:outgoing>Flow_0q71tz2</bpmn:outgoing>
      <bpmn:script>import groovy.json.JsonSlurper

        def slurper = new JsonSlurper()

        def cephData = [:]
        labResponse.responseBody.fieldNames().each {
        cephData[it] = labResponse.responseBody.prop(it).value()
        }

        cephData.remove('koatuuId')
        cephData.remove('ownershipId')
        cephData.remove('kopfgId')

        cephData['oblast'] = slurper.parseText(oblResponse.responseBody.toString())
        cephData['koatuu'] = slurper.parseText(koatuuResponse.responseBody.toString())
        cephData['ownership'] = slurper.parseText(ownershipResponse.responseBody.toString())
        cephData['kopfg'] = slurper.parseText(kopfgResponse.responseBody.toString())

        execution.removeVariable('payload')
        execution.setVariableLocalTransient('payload', S(cephData, 'application/json'))

        execution.setVariable('laboratoryId', labResponse.responseBody.prop('laboratoryId').value())</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:serviceTask id="readLabFromDataFactoryActivity" name="Запит даних про лабораторію" camunda:modelerTemplate="dataFactoryConnectorReadDelegate" camunda:delegateExpression="${dataFactoryConnectorReadDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">laboratory</camunda:inputParameter>
          <camunda:inputParameter name="id">${submission('searchLabFormActivity').formData.prop('laboratory').prop('laboratoryId').value()}</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('searchLabFormActivity').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="labResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_014dzg9</bpmn:incoming>
      <bpmn:outgoing>Flow_1w1iczd</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_1opc1nc">
        <bpmn:targetRef>DataStoreReference_1avq00l</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="readKoatuuFromDataFactoryActivity" name="Запит даних про населенний пункт" camunda:modelerTemplate="dataFactoryConnectorReadDelegate" camunda:delegateExpression="${dataFactoryConnectorReadDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">koatuu</camunda:inputParameter>
          <camunda:inputParameter name="id">${labResponse.value.responseBody.prop('koatuuId').value()}</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('searchLabFormActivity').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="koatuuResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1w1iczd</bpmn:incoming>
      <bpmn:outgoing>Flow_0yx6dt7</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_02aoa2p">
        <bpmn:targetRef>DataStoreReference_1897i2u</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:dataStoreReference id="DataStoreReference_1897i2u" name="Дата фабрика" />
    <bpmn:serviceTask id="searchOblastFromDataFactoryActivity" name="Запит данних про область" camunda:modelerTemplate="dataFactoryConnectorReadDelegate" camunda:delegateExpression="${dataFactoryConnectorReadDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">koatuu</camunda:inputParameter>
          <camunda:inputParameter name="id">${searchOblResponse.value.responseBody.elements()[0].prop('koatuuIdObl').value()}</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('searchLabFormActivity').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="oblResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_036idne</bpmn:incoming>
      <bpmn:outgoing>Flow_1jl0egn</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="readOwnershipFromDataFactoryActivity" name="Запит данних про форму власності" camunda:modelerTemplate="dataFactoryConnectorReadDelegate" camunda:delegateExpression="${dataFactoryConnectorReadDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">ownership</camunda:inputParameter>
          <camunda:inputParameter name="id">${labResponse.value.responseBody.prop('ownershipId').value()}</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('searchLabFormActivity').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="ownershipResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1jl0egn</bpmn:incoming>
      <bpmn:outgoing>Flow_1ib47w7</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="readKopfgFromDataFactoryActivity" name="Запит данних про організаційно-правову форму" camunda:modelerTemplate="dataFactoryConnectorReadDelegate" camunda:delegateExpression="${dataFactoryConnectorReadDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">kopfg</camunda:inputParameter>
          <camunda:inputParameter name="id">${labResponse.value.responseBody.prop('kopfgId').value()}</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('searchLabFormActivity').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="kopfgResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1ib47w7</bpmn:incoming>
      <bpmn:outgoing>Flow_091xock</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:boundaryEvent id="Event_15jex7p" attachedToRef="readLabFromDataFactoryActivity">
      <bpmn:outgoing>Flow_1j6i1u4</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_059wq51" />
    </bpmn:boundaryEvent>
    <bpmn:boundaryEvent id="Event_15d2rb2" attachedToRef="readKoatuuFromDataFactoryActivity">
      <bpmn:outgoing>Flow_0t6hry5</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_0w26d67" />
    </bpmn:boundaryEvent>
    <bpmn:boundaryEvent id="Event_15mrc5a" attachedToRef="searchOblastFromDataFactoryActivity">
      <bpmn:outgoing>Flow_1keuxww</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_11td3gy" />
    </bpmn:boundaryEvent>
    <bpmn:boundaryEvent id="Event_0f8ud3h" attachedToRef="readOwnershipFromDataFactoryActivity">
      <bpmn:outgoing>Flow_1g4noy6</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1rm1q9h" />
    </bpmn:boundaryEvent>
    <bpmn:boundaryEvent id="Event_1ggoh7i" attachedToRef="readKopfgFromDataFactoryActivity">
      <bpmn:outgoing>Flow_10urxou</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_0o184ol" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_0q71tz2" sourceRef="convertLabDataToFormDataFormatActivity" targetRef="viewLabDataFormActivity" />
    <bpmn:userTask id="viewLabDataFormActivity" name="Відобразити дані про лабораторію" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-view-lab-data" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0q71tz2</bpmn:incoming>
      <bpmn:outgoing>Flow_0hvq8bh</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_0hvq8bh" sourceRef="viewLabDataFormActivity" targetRef="Gateway_0poyko1" />
    <bpmn:userTask id="updateLabFormActivity" name="Оновити дані про лабораторію" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="update-lab-bp-change-lab-data" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${submission('viewLabDataFormActivity').formData}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1gk3fzt</bpmn:incoming>
      <bpmn:outgoing>Flow_115drxp</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_0poyko1">
      <bpmn:incoming>Flow_1oda6vs</bpmn:incoming>
      <bpmn:incoming>Flow_0hvq8bh</bpmn:incoming>
      <bpmn:outgoing>Flow_1gk3fzt</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_115drxp" sourceRef="updateLabFormActivity" targetRef="extractNameAndEdrpouFromUpdateLabFormActivity" />
    <bpmn:scriptTask id="extractNameAndEdrpouFromUpdateLabFormActivity" name="Підготовка зміних для отримання запису" scriptFormat="groovy">
      <bpmn:incoming>Flow_115drxp</bpmn:incoming>
      <bpmn:outgoing>Flow_0hz7hdv</bpmn:outgoing>
      <bpmn:script>var name = submission('updateLabFormActivity').formData.prop('name').stringValue()
        var edrpou = submission('updateLabFormActivity').formData.prop('edrpou').stringValue()

        execution.removeVariable('name')
        execution.removeVariable('edrpou')
        execution.setVariableLocalTransient('name', name)
        execution.setVariableLocalTransient('edrpou', edrpou)

        var oldName = submission('viewLabDataFormActivity').formData.prop('name').stringValue()
        execution.removeVariable('oldName')
        execution.setVariableLocalTransient('oldName', oldName)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:exclusiveGateway id="Gateway_038bgls" name="Назву лабораторії змінено?">
      <bpmn:incoming>Flow_0hz7hdv</bpmn:incoming>
      <bpmn:outgoing>Flow_0qe6tpr</bpmn:outgoing>
      <bpmn:outgoing>Flow_0dadnzp</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_1qa6te9" name="Дані присутні?">
      <bpmn:incoming>Flow_0s14o5i</bpmn:incoming>
      <bpmn:outgoing>Flow_1ut6pfw</bpmn:outgoing>
      <bpmn:outgoing>Flow_08wtjup</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_0gqiwsr">
      <bpmn:incoming>Flow_0qe6tpr</bpmn:incoming>
      <bpmn:incoming>Flow_1ut6pfw</bpmn:incoming>
      <bpmn:incoming>Flow_1t8c6oe</bpmn:incoming>
      <bpmn:outgoing>Flow_09rm3a8</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Activity_00w3djy" name="Формування валідаційної помилки" camunda:modelerTemplate="userDataValidationErrorDelegate" camunda:delegateExpression="${userDataValidationErrorDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="validationErrors">
            <camunda:list>
              <camunda:value>{"field": "name", "value": "${name.value.replaceAll("\"", "\\\\\"")}", "message": "Дані про цю лабораторію вже присутні"}</camunda:value>
              <camunda:value>{"field": "edrpou", "value": "${edrpou.value}", "message": "Дані про цю лабораторію вже присутні"}</camunda:value>
            </camunda:list>
          </camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_08wtjup</bpmn:incoming>
      <bpmn:outgoing>Flow_1oda6vs</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="searchForLabByNameAndEdrpouActivity" name="Пошук даних про лабораторію" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">laboratory-equal-edrpou-name-count</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="name">${name.value}</camunda:entry>
              <camunda:entry key="edrpou">${edrpou.value}</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('updateLabFormActivity').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="response">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0dadnzp</bpmn:incoming>
      <bpmn:outgoing>Flow_0s14o5i</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:userTask id="signLabFormActivity" name="Підписати дані КЕП" camunda:modelerTemplate="officerSignTaskTemplate" camunda:formKey="shared-sign-lab" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="true" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${submission('updateLabFormActivity').formData}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_09rm3a8</bpmn:incoming>
      <bpmn:outgoing>Flow_1fktke4</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_1fktke4" sourceRef="signLabFormActivity" targetRef="convertSignFormDataToDataFactoryFormatActivity" />
    <bpmn:scriptTask id="convertSignFormDataToDataFactoryFormatActivity" name="Підготовка даних для запису (transient var)" scriptFormat="groovy">
      <bpmn:incoming>Flow_1fktke4</bpmn:incoming>
      <bpmn:outgoing>Flow_0jbvai0</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0hjhmrk">
        <bpmn:targetRef>DataObjectReference_1burbk6</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
      <bpmn:script>def signedFormData = submission('signLabFormActivity').formData

        signedFormData.prop("oblast", signedFormData.prop("oblast").prop("code").value())

        signedFormData.prop("koatuuId", signedFormData.prop("koatuu").prop("koatuuId").value())
        signedFormData.deleteProp("koatuu")

        signedFormData.prop("ownershipId", signedFormData.prop("ownership").prop("ownershipId").value())
        signedFormData.deleteProp("ownership")

        signedFormData.prop("kopfgId", signedFormData.prop("kopfg").prop("kopfgId").value())
        signedFormData.deleteProp("kopfg")

        if (!signedFormData.prop('accreditationFlag').boolValue()) {
        signedFormData.prop('accreditationEndDate', null as String)
        }

        execution.removeVariable('dataPayload')
        execution.setVariableLocalTransient('dataPayload', signedFormData)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:dataObjectReference id="DataObjectReference_1burbk6" dataObjectRef="DataObject_12xnr2q" />
    <bpmn:dataObject id="DataObject_12xnr2q" />
    <bpmn:serviceTask id="readOblInfoFromDataFactoryActivity" name="Пошук інформації про id області" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">koatuu-equal-koatuu-id-name</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="koatuuId">${labResponse.value.responseBody.prop('koatuuId').value()}</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('searchLabFormActivity').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="searchOblResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0yx6dt7</bpmn:incoming>
      <bpmn:outgoing>Flow_036idne</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_036idne" sourceRef="readOblInfoFromDataFactoryActivity" targetRef="searchOblastFromDataFactoryActivity" />
    <bpmn:boundaryEvent id="Event_04r5lz8" attachedToRef="readOblInfoFromDataFactoryActivity">
      <bpmn:outgoing>Flow_1yoy31g</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1xc5nir" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1yoy31g" sourceRef="Event_04r5lz8" targetRef="Gateway_1xtqt2s" />
    <bpmn:callActivity id="signFormDataWithDsoActivity" name="Підписати дані системним ключем" calledElement="system-signature-bp">
      <bpmn:extensionElements>
        <camunda:in source="dataPayload" target="dataToSign" />
        <camunda:out source="system_signature_ceph_key" target="system_signature_ceph_key" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0jbvai0</bpmn:incoming>
      <bpmn:outgoing>Flow_19kn1q3</bpmn:outgoing>
      <bpmn:property id="Property_1dq0yld" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_0n3q3wn">
        <bpmn:sourceRef>DataObjectReference_1burbk6</bpmn:sourceRef>
        <bpmn:targetRef>Property_1dq0yld</bpmn:targetRef>
      </bpmn:dataInputAssociation>
    </bpmn:callActivity>
    <bpmn:sequenceFlow id="Flow_19kn1q3" sourceRef="signFormDataWithDsoActivity" targetRef="updateLabInDataFactoryActivity" />
    <bpmn:serviceTask id="defineBusinessProcessStatusActivity" name="Результат виконання &#34;Дані про лабораторію оновлені&#34;" camunda:modelerTemplate="defineBusinessProcessStatusDelegate" camunda:delegateExpression="${defineBusinessProcessStatusDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="status">Дані про лабораторію оновлені</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_00oa0q7</bpmn:incoming>
      <bpmn:outgoing>Flow_041kh82</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_0xw0ca1" name="Дані оновлені">
      <bpmn:incoming>Flow_041kh82</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:dataStoreReference id="DataStoreReference_0ftohld" name="Дата фабрика" />
    <bpmn:serviceTask id="updateLabInDataFactoryActivity" name="Зберегти дані в Дата фабрику" camunda:modelerTemplate="dataFactoryConnectorUpdateDelegate" camunda:delegateExpression="${dataFactoryConnectorUpdateDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">laboratory</camunda:inputParameter>
          <camunda:inputParameter name="id">${laboratoryId}</camunda:inputParameter>
          <camunda:inputParameter name="payload">${dataPayload}</camunda:inputParameter>
          <camunda:inputParameter name="x_digital_signature_derived_ceph_key">${system_signature_ceph_key}</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('signLabFormActivity').accessToken}</camunda:inputParameter>
          <camunda:inputParameter name="x_digital_signature_ceph_key">${sign_submission('signLabFormActivity').signatureDocumentId}</camunda:inputParameter>
          <camunda:outputParameter name="response">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_19kn1q3</bpmn:incoming>
      <bpmn:outgoing>Flow_00oa0q7</bpmn:outgoing>
      <bpmn:property id="Property_0ic7fow" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_02og9fl">
        <bpmn:sourceRef>DataObjectReference_1burbk6</bpmn:sourceRef>
        <bpmn:targetRef>Property_0ic7fow</bpmn:targetRef>
      </bpmn:dataInputAssociation>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_13oebk7">
        <bpmn:targetRef>DataStoreReference_0ftohld</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:boundaryEvent id="Event_1x8mg0g" attachedToRef="updateLabInDataFactoryActivity">
      <bpmn:outgoing>Flow_1t8c6oe</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_0w47876" />
    </bpmn:boundaryEvent>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_076bpic">
      <bpmndi:BPMNShape id="Participant_16k8tsd_di" bpmnElement="Participant_16k8tsd" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="3038" height="390" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1yoy31g_di" bpmnElement="Flow_1yoy31g">
        <di:waypoint x="830" y="212" />
        <di:waypoint x="830" y="170" />
        <di:waypoint x="318" y="170" />
        <di:waypoint x="318" y="245" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_036idne_di" bpmnElement="Flow_036idne">
        <di:waypoint x="880" y="270" />
        <di:waypoint x="920" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1fktke4_di" bpmnElement="Flow_1fktke4">
        <di:waypoint x="2538" y="270" />
        <di:waypoint x="2578" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_115drxp_di" bpmnElement="Flow_115drxp">
        <di:waypoint x="1828" y="270" />
        <di:waypoint x="1868" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0hvq8bh_di" bpmnElement="Flow_0hvq8bh">
        <di:waypoint x="1598" y="270" />
        <di:waypoint x="1633" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0q71tz2_di" bpmnElement="Flow_0q71tz2">
        <di:waypoint x="1448" y="270" />
        <di:waypoint x="1498" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_014dzg9_di" bpmnElement="Flow_014dzg9">
        <di:waypoint x="468" y="270" />
        <di:waypoint x="508" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_00oa0q7_di" bpmnElement="Flow_00oa0q7">
        <di:waypoint x="2940" y="270" />
        <di:waypoint x="2968" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0jbvai0_di" bpmnElement="Flow_0jbvai0">
        <di:waypoint x="2678" y="270" />
        <di:waypoint x="2718" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0dadnzp_di" bpmnElement="Flow_0dadnzp">
        <di:waypoint x="2063" y="270" />
        <di:waypoint x="2110" y="270" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2079" y="252" width="16" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0s14o5i_di" bpmnElement="Flow_0s14o5i">
        <di:waypoint x="2210" y="270" />
        <di:waypoint x="2253" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1g4noy6_di" bpmnElement="Flow_1g4noy6">
        <di:waypoint x="1110" y="212" />
        <di:waypoint x="1110" y="170" />
        <di:waypoint x="318" y="170" />
        <di:waypoint x="318" y="245" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1keuxww_di" bpmnElement="Flow_1keuxww">
        <di:waypoint x="970" y="212" />
        <di:waypoint x="970" y="170" />
        <di:waypoint x="318" y="170" />
        <di:waypoint x="318" y="245" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0t6hry5_di" bpmnElement="Flow_0t6hry5">
        <di:waypoint x="690" y="212" />
        <di:waypoint x="690" y="170" />
        <di:waypoint x="318" y="170" />
        <di:waypoint x="318" y="245" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1j6i1u4_di" bpmnElement="Flow_1j6i1u4">
        <di:waypoint x="560" y="212" />
        <di:waypoint x="560" y="170" />
        <di:waypoint x="318" y="170" />
        <di:waypoint x="318" y="245" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_091xock_di" bpmnElement="Flow_091xock">
        <di:waypoint x="1300" y="270" />
        <di:waypoint x="1348" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ib47w7_di" bpmnElement="Flow_1ib47w7">
        <di:waypoint x="1160" y="270" />
        <di:waypoint x="1200" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1jl0egn_di" bpmnElement="Flow_1jl0egn">
        <di:waypoint x="1020" y="270" />
        <di:waypoint x="1060" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0yx6dt7_di" bpmnElement="Flow_0yx6dt7">
        <di:waypoint x="740" y="270" />
        <di:waypoint x="780" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1w1iczd_di" bpmnElement="Flow_1w1iczd">
        <di:waypoint x="608" y="270" />
        <di:waypoint x="640" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_10urxou_di" bpmnElement="Flow_10urxou">
        <di:waypoint x="1250" y="212" />
        <di:waypoint x="1250" y="170" />
        <di:waypoint x="318" y="170" />
        <di:waypoint x="318" y="245" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_14ae7b2_di" bpmnElement="Flow_14ae7b2">
        <di:waypoint x="266" y="270" />
        <di:waypoint x="293" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1kqecau_di" bpmnElement="Flow_1kqecau">
        <di:waypoint x="343" y="270" />
        <di:waypoint x="368" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_09rm3a8_di" bpmnElement="Flow_09rm3a8">
        <di:waypoint x="2403" y="270" />
        <di:waypoint x="2438" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0qe6tpr_di" bpmnElement="Flow_0qe6tpr">
        <di:waypoint x="2038" y="295" />
        <di:waypoint x="2038" y="370" />
        <di:waypoint x="2378" y="370" />
        <di:waypoint x="2378" y="295" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2025" y="323" width="9" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1oda6vs_di" bpmnElement="Flow_1oda6vs">
        <di:waypoint x="2118" y="160" />
        <di:waypoint x="1658" y="160" />
        <di:waypoint x="1658" y="245" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_08wtjup_di" bpmnElement="Flow_08wtjup">
        <di:waypoint x="2278" y="245" />
        <di:waypoint x="2278" y="160" />
        <di:waypoint x="2218" y="160" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2246" y="137" width="16" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1gk3fzt_di" bpmnElement="Flow_1gk3fzt">
        <di:waypoint x="1683" y="270" />
        <di:waypoint x="1728" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ut6pfw_di" bpmnElement="Flow_1ut6pfw">
        <di:waypoint x="2303" y="270" />
        <di:waypoint x="2353" y="270" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2308" y="252" width="9" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0hz7hdv_di" bpmnElement="Flow_0hz7hdv">
        <di:waypoint x="1968" y="270" />
        <di:waypoint x="2013" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1t8c6oe_di" bpmnElement="Flow_1t8c6oe">
        <di:waypoint x="2890" y="212" />
        <di:waypoint x="2890" y="192" />
        <di:waypoint x="2378" y="192" />
        <di:waypoint x="2378" y="245" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_041kh82_di" bpmnElement="Flow_041kh82">
        <di:waypoint x="3068" y="270" />
        <di:waypoint x="3130" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_19kn1q3_di" bpmnElement="Flow_19kn1q3">
        <di:waypoint x="2818" y="270" />
        <di:waypoint x="2840" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Activity_0yerjgt_di" bpmnElement="searchLabFormActivity">
        <dc:Bounds x="368" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0garqs8_di" bpmnElement="Event_0garqs8">
        <dc:Bounds x="230" y="252" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="228" y="295" width="43" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_07ast56_di" bpmnElement="Gateway_1xtqt2s" isMarkerVisible="true">
        <dc:Bounds x="293" y="245" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1avq00l_di" bpmnElement="DataStoreReference_1avq00l">
        <dc:Bounds x="533" y="365" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="522" y="422" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1kcv02r_di" bpmnElement="convertLabDataToFormDataFormatActivity">
        <dc:Bounds x="1348" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_10nfa7m_di" bpmnElement="readLabFromDataFactoryActivity">
        <dc:Bounds x="508" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0y72w3r_di" bpmnElement="readKoatuuFromDataFactoryActivity">
        <dc:Bounds x="640" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1897i2u_di" bpmnElement="DataStoreReference_1897i2u">
        <dc:Bounds x="665" y="365" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="654" y="422" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0v7rico_di" bpmnElement="searchOblastFromDataFactoryActivity">
        <dc:Bounds x="920" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_03oltfd_di" bpmnElement="readOwnershipFromDataFactoryActivity">
        <dc:Bounds x="1060" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_12ftgyh_di" bpmnElement="readKopfgFromDataFactoryActivity">
        <dc:Bounds x="1200" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_185zjjw_di" bpmnElement="viewLabDataFormActivity">
        <dc:Bounds x="1498" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1n8mv84_di" bpmnElement="updateLabFormActivity">
        <dc:Bounds x="1728" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0poyko1_di" bpmnElement="Gateway_0poyko1" isMarkerVisible="true">
        <dc:Bounds x="1633" y="245" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1jxdydp_di" bpmnElement="extractNameAndEdrpouFromUpdateLabFormActivity">
        <dc:Bounds x="1868" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_038bgls_di" bpmnElement="Gateway_038bgls" isMarkerVisible="true">
        <dc:Bounds x="2013" y="245" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2012" y="200" width="60" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1qa6te9_di" bpmnElement="Gateway_1qa6te9" isMarkerVisible="true">
        <dc:Bounds x="2253" y="245" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2241" y="305" width="74" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0gqiwsr_di" bpmnElement="Gateway_0gqiwsr" isMarkerVisible="true">
        <dc:Bounds x="2353" y="245" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0nmo4bv_di" bpmnElement="Activity_00w3djy">
        <dc:Bounds x="2118" y="120" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1veuvsj_di" bpmnElement="searchForLabByNameAndEdrpouActivity">
        <dc:Bounds x="2110" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0mn8k1x_di" bpmnElement="signLabFormActivity">
        <dc:Bounds x="2438" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1sxaxe2_di" bpmnElement="convertSignFormDataToDataFactoryFormatActivity">
        <dc:Bounds x="2578" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataObjectReference_1burbk6_di" bpmnElement="DataObjectReference_1burbk6">
        <dc:Bounds x="2610" y="365" width="36" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_030bh60_di" bpmnElement="readOblInfoFromDataFactoryActivity">
        <dc:Bounds x="780" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1n0utt3_di" bpmnElement="signFormDataWithDsoActivity">
        <dc:Bounds x="2718" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0ze90pn_di" bpmnElement="defineBusinessProcessStatusActivity">
        <dc:Bounds x="2968" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0xw0ca1_di" bpmnElement="Event_0xw0ca1">
        <dc:Bounds x="3130" y="252" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3114" y="295" width="70" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_0ftohld_di" bpmnElement="DataStoreReference_0ftohld">
        <dc:Bounds x="2883" y="365" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2872" y="422" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1828jrf_di" bpmnElement="updateLabInDataFactoryActivity">
        <dc:Bounds x="2840" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0jgudi2_di" bpmnElement="Event_04r5lz8">
        <dc:Bounds x="812" y="212" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0sb5cju_di" bpmnElement="Event_1ggoh7i">
        <dc:Bounds x="1232" y="212" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_10zpuie_di" bpmnElement="Event_0f8ud3h">
        <dc:Bounds x="1092" y="212" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0uuy9f8_di" bpmnElement="Event_15mrc5a">
        <dc:Bounds x="952" y="212" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_14h51ij_di" bpmnElement="Event_15d2rb2">
        <dc:Bounds x="672" y="212" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0rj1y5c_di" bpmnElement="Event_15jex7p">
        <dc:Bounds x="542" y="212" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_14m2vl5_di" bpmnElement="Event_1x8mg0g">
        <dc:Bounds x="2872" y="212" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="DataOutputAssociation_1opc1nc_di" bpmnElement="DataOutputAssociation_1opc1nc">
        <di:waypoint x="558" y="310" />
        <di:waypoint x="558" y="360" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_02aoa2p_di" bpmnElement="DataOutputAssociation_02aoa2p">
        <di:waypoint x="690" y="310" />
        <di:waypoint x="690" y="365" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_0hjhmrk_di" bpmnElement="DataOutputAssociation_0hjhmrk">
        <di:waypoint x="2627" y="310" />
        <di:waypoint x="2626" y="365" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataInputAssociation_0n3q3wn_di" bpmnElement="DataInputAssociation_0n3q3wn">
        <di:waypoint x="2646" y="380" />
        <di:waypoint x="2730" y="380" />
        <di:waypoint x="2730" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_13oebk7_di" bpmnElement="DataOutputAssociation_13oebk7">
        <di:waypoint x="2913" y="310" />
        <di:waypoint x="2913" y="365" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataInputAssociation_02og9fl_di" bpmnElement="DataInputAssociation_02og9fl">
        <di:waypoint x="2646" y="400" />
        <di:waypoint x="2870" y="400" />
        <di:waypoint x="2870" y="310" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
